option_settings:
  aws:elasticbeanstalk:container:python:
    WSGIPath: platzi_store_app.wsgi:application
  aws:elasticbeanstalk:application:environment:
    DJANGO_SETTINGS_MODULE: platzi_store_app.settings
    PYTHONPATH: /var/app/current:$PYTHONPATH
    DJANGO_DEBUG: 'False'
    DATABASE_URL: postgres://masteruser:tiendaharold1206@dbtiendaharold.czq64eeo4efy.us-east-2.rds.amazonaws.com:5432/tiendaharold

container_commands:
  00_install_dependencies:
    command: "source /var/app/venv/staging-LQM1lest/bin/activate && pip install -r requirements.txt"
    leader_only: true
  01_install_psycopg2:
    command: "source /var/app/venv/staging-LQM1lest/bin/activate && pip install psycopg2-binary"
    leader_only: true
  02_install_whitenoise:
    command: "source /var/app/venv/staging-LQM1lest/bin/activate && pip install whitenoise"
    leader_only: true
  03_migrate:
    command: |
      source /var/app/venv/staging-LQM1lest/bin/activate && 
      python manage.py migrate --noinput
    cwd: "/var/app/current/platzi_store_app"
    leader_only: true
  04_collectstatic:
    command: |
      source /var/app/venv/staging-LQM1lest/bin/activate && 
      python manage.py collectstatic --noinput
    cwd: "/var/app/current/platzi_store_app"
    leader_only: true
